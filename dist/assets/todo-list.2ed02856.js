var O=Object.defineProperty,N=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var I=(t,e,l)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,f=(t,e)=>{for(var l in e||(e={}))j.call(e,l)&&I(t,l,e[l]);if(T)for(var l of T(e))F.call(e,l)&&I(t,l,e[l]);return t},_=(t,e)=>N(t,E(e));import{r as w,_ as A,a as S,w as y,t as K,o as m,c as u,b as d,d as v,v as U,e as b,f as x,g as M,n as $,h as q,i as D,j as B,F as z,k as R,l as h,m as L,p as G,q as H,s as V}from"./index.1a46bf56.js";const k=w({todoList:[]}),C=()=>k.todoList,g=t=>{k.todoList=t},J=t=>{k.todoList.push(t)},P=t=>{g(k.todoList.map(e=>_(f({},e),{completed:t})))};const Q={name:"TodoItem",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:model-value","on-change","on-clear"],setup(t,{emit:e}){const l=S(null),o=w({isActive:!1,inputValue:"",isCompleted:!1});y(()=>t.modelValue,()=>{o.inputValue=t.modelValue.title,o.isCompleted=t.modelValue.completed},{immediate:!0});const c=()=>{o.isActive=!1,e("update:model-value",o.inputValue)},p=()=>{o.isActive=!0,$(()=>l.value.focus())},s=r=>{r.keyCode===27&&(o.inputValue=t.modelValue.title,o.isActive=!1),r.keyCode===13&&(o.isActive=!1)};return _(f({},K(o)),{inputElement:l,onBlur:c,onDbClick:p,onKeyDown:s})}},W={class:"todo-item"},X={class:"todo-item__checkbox"},Y=["textContent"];function Z(t,e,l,o,c,p){return m(),u("div",W,[d("div",X,[v(d("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.isCompleted=s),type:"checkbox","data-test":"todo-item__checkbox",onChange:e[1]||(e[1]=s=>t.$emit("on-change",t.isCompleted))},null,544),[[U,t.isCompleted]])]),d("div",null,[t.isActive?v((m(),u("input",{key:1,"data-test":"todo-item__input",ref:"inputElement","onUpdate:modelValue":e[3]||(e[3]=s=>t.inputValue=s),type:"text",onBlur:e[4]||(e[4]=(...s)=>o.onBlur&&o.onBlur(...s)),onKeydown:e[5]||(e[5]=(...s)=>o.onKeyDown&&o.onKeyDown(...s))},null,544)),[[x,t.inputValue]]):(m(),u("div",{key:0,"data-test":"todo-item__label",textContent:b(t.inputValue),onDblclick:e[2]||(e[2]=(...s)=>o.onDbClick&&o.onDbClick(...s))},null,40,Y))]),d("a",{href:"#",class:"todo-item__clear","data-test":"todo-item__clear",onClick:e[6]||(e[6]=M(s=>t.$emit("on-clear"),["prevent"]))}," x ")])}var ee=A(Q,[["render",Z]]);const te={name:"TodoList",components:{TodoItem:ee},props:{filter:{type:String,default:""}},setup(t){const e=w({todoList:[],mainCheckbox:!1,newTodo:"",todoValue:"",showCompletedButton:!1,counterLabel:q(()=>` ${e.todoList.length===1?"item":"items"} left`)});y(()=>e.todoList,n=>{e.showCompletedButton=n.some(({completed:a})=>a),e.mainCheckbox=n.every(({completed:a})=>a)},{deep:!0}),y(()=>t.filter,()=>{s()});const l=n=>e.todoList.splice(n,1),o=n=>{n.keyCode===13&&e.newTodo&&(J({title:e.newTodo,completed:!1}),e.todoList=C(),e.newTodo="",s())},c=(n,a)=>{e.todoList[a].completed=n,g(e.todoList),s()},p=(n,a)=>{n?e.todoList[a].title=n:e.todoList.splice(a,1),g(e.todoList)},s=()=>{if(!t.filter)return e.todoList=C();e.todoList=C().filter(({completed:n})=>t.filter==="active"?!n:n)},r=()=>{e.todoList=C().filter(({completed:n})=>!n)},i=()=>{P(e.mainCheckbox),e.todoList=C()};return _(f({},K(e)),{onClear:l,onInputKeyDown:o,onChangeTodoItem:c,onUpdateTodoItem:p,clearCompletedItems:r,onChangeMainCheckbox:i})}},oe={class:"todo-list"},ne={class:"todo-list__header"},le={key:0,class:"todo-list__footer"},se={class:"todo-list__nav"},ie=V(" All "),ae=V(" Active "),de=V(" Completed ");function re(t,e,l,o,c,p){const s=D("todo-item"),r=D("router-link");return m(),u("main",oe,[d("div",ne,[t.todoList.length?v((m(),u("input",{key:0,class:"todo-list__header-checkbox","onUpdate:modelValue":e[0]||(e[0]=i=>t.mainCheckbox=i),type:"checkbox",onChange:e[1]||(e[1]=(...i)=>o.onChangeMainCheckbox&&o.onChangeMainCheckbox(...i))},null,544)),[[U,t.mainCheckbox]]):B("",!0),v(d("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>t.newTodo=i),class:"todo-list__header-input",type:"text",autofocus:"",onKeydown:e[3]||(e[3]=(...i)=>o.onInputKeyDown&&o.onInputKeyDown(...i))},null,544),[[x,t.newTodo]])]),(m(!0),u(z,null,R(t.todoList,(i,n)=>(m(),H(s,{key:n,"model-value":i,type:"text","onUpdate:modelValue":a=>o.onUpdateTodoItem(a,n),onOnChange:a=>o.onChangeTodoItem(a,n),onOnClear:a=>o.onClear(n)},null,8,["model-value","onUpdate:modelValue","onOnChange","onOnClear"]))),128)),t.todoList.length||l.filter?(m(),u("div",le,[d("div",null,[d("strong",null,b(t.todoList.length),1),d("span",null,b(t.counterLabel),1)]),d("nav",se,[h(r,{to:{name:"home"},class:"todo-list__nav-item"},{default:L(()=>[ie]),_:1}),h(r,{to:{name:"active"},class:"todo-list__nav-item"},{default:L(()=>[ae]),_:1}),h(r,{to:{name:"completed"},class:"todo-list__nav-item"},{default:L(()=>[de]),_:1})]),d("div",{class:G(["todo-list__clear",{"todo-list__clear--shown":t.showCompletedButton&&!l.filter}])},[d("a",{href:"#",onClick:e[4]||(e[4]=M((...i)=>o.clearCompletedItems&&o.clearCompletedItems(...i),["prevent"]))},"Clear completed")],2)])):B("",!0)])}var ce=A(te,[["render",re]]);export{ce as default};
